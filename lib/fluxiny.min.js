(function(e){var t=function(){return{_stores:[],register:function(e){if(!e||!e.update)throw new Error("You should provide a store that has an `update` method.");var t=[],n=function(){t.forEach(function(t){t(e)})},r=function(n,r){n=n.constructor===Array?n:[n],t=t.concat(n),r||n.forEach(function(t){t(e)})};return this._stores.push({store:e,change:n}),r},dispatch:function(e){this._stores.length>0&&this._stores.forEach(function(t){t.store.update(e,t.change)})}}},n={create:function(){var e=t();return{createAction:function(t){if(!t)throw new Error("Please, provide action's type.");return function(n){return e.dispatch({type:t,payload:n})}},createSubscriber:function(t){return e.register(t)}}}};typeof define=="function"&&define.amd?define(function(){return n}):typeof module!="undefined"&&module.exports?module.exports=n:e.Fluxiny=n})(typeof window!="undefined"?window:this);